# PNDA Mirror 
Use these tools to download the 3rd party dependencies that PNDA uses during the orchestration process. 

## Quick Start

To simply run the entire mirror creation process -

```sh
sudo su
./create_mirror.sh
```

The deb packages are only generated by create_mirror.sh when it runs on Ubuntu and the rpms are only generated when it runs on Redhat Enterprise Linux. For this reason, create_mirror.sh should be run on the same Operating System type as PNDA will be deployed using. In addition, in order that create_mirror.sh obtains the correct set of dependencies for the image that PNDA will be deployed on, create_mirror.sh **must** be run on a **clean instance** of the **same image** that PNDA will be deployed on.

This takes about 20 minutes to run and the output will be available in a directory named ```mirror-dist```.

In case you are not on AWS environment, you will need to overridde default RedHat repo by doing:

```
sudo su
export RPM_OPTIONAL=rhel-7-server-optional-rpms
export RPM_EXTRAS=rhel-7-server-extras-rpms
./create_mirror.sh
```

## Mirror Modules

The different parts of the mirror can be created separately if required. The scripts to do this are -

```
create_mirror_deb.sh
create_mirror_rpm.sh
create_mirror_misc.sh
create_mirror_python.sh
create_mirror_anaconda.sh
create_mirror_cdh.sh
```

Note that, as above, the deb and rpm scripts are for use on Ubuntu or RHEL hosts respectively.

Each script creates it's output in a directory named for the respective mirror type -

```
mirror_deb
mirror_rpm
mirror_misc
mirror_python
mirror_anaconda
mirror_cloudera
```

## Updating the mirror

If you want to update an existing mirror with newer packages, use the update scripts in the tools folder and/or the python scripts (see [Python Mirror Maintenance](docs/PYTHON_ADVANCED.md))